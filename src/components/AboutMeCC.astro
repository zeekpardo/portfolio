---
// data imports
import workExperience from "@/data/Jobs.ts"
import languages from "../data/languages.ts"
import hardSkills from "@/data/hardSkills"
import softSkills from "@/data/softSkills"

// component imports
import JobDetails from "./JobDetails.astro";
import SkillCard from "./SkillCard.astro";


---

<div class="relative flex flex-col gap-4 text-n700 dark:text-n200 w-full mt-10 px-4">
    {/* Introduction Text - Above Accordion */}
    <div class="mb-6">
        <div class="space-y-4">
            <p class="text-xl font-semibold text-primary-light dark:text-primary-dark">
                I'm an AI automation specialist who transforms operational friction into scalable systems for businesses, churches, and nonprofits.
            </p>
            
            <div class="grid md:grid-cols-2 gap-4 text-base">
                <div class="space-y-2">
                    <h3 class="font-semibold text-lg">What I Build:</h3>
                    <ul class="space-y-1 text-n600 dark:text-n300">
                        <li>• AI chatbots that capture 40% more leads</li>
                        <li>• CRM automation that converts prospects</li>
                        <li>• Full SaaS platforms like Groovi QR</li>
                        <li>• Custom systems that eliminate bottlenecks</li>
                    </ul>
                </div>
                
                <div class="space-y-2">
                    <h3 class="font-semibold text-lg">How I Work:</h3>
                    <ul class="space-y-1 text-n600 dark:text-n300">
                        <li>• Combine product vision with technical execution</li>
                        <li>• Turn "we can't do that" into workflows</li>
                        <li>• Focus on mission, not obstacles</li>
                        <li>• Build systems that empower entire teams</li>
                    </ul>
                </div>
            </div>
            
            <p class="text-base italic text-n600 dark:text-n300 border-l-4 border-primary-light dark:border-primary-dark pl-4">
                I solve the problems that slow teams down and leave customers behind.
            </p>
        </div>
    </div>
    
    <div class="accordion-container">
        {/* Accordion Section 1 - Why I'm Excited About This Role */}
        <div class="accordion-item border border-gray-200 dark:border-gray-700 rounded-lg mb-2">
            <button 
                class="accordion-header w-full text-left px-6 py-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 flex justify-between items-center font-semibold text-lg transition-colors duration-200" 
                data-section="section1"
            >
                <span>Work Experience</span>
                <svg class="accordion-icon w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="accordion-content px-6 py-4 block" data-section="section1">
                <div class="flex flex-col gap-6">
                    {workExperience.map((job) => (
                        <JobDetails jobData={job} />
                    ))}
                </div>
            </div>
        </div>

        {/* Accordion Section 2 - About Me */}
        <div class="accordion-item border border-gray-200 dark:border-gray-700 rounded-lg mb-2">
            <button 
                class="accordion-header w-full text-left px-6 py-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 flex justify-between items-center font-semibold text-lg transition-colors duration-200" 
                data-section="section2"
            >
                <span>About Me</span>
                <svg class="accordion-icon w-5 h-5 transform transition-transform duration-200 rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="accordion-content px-6 py-4 hidden" data-section="section2">
                <p class="mb-4">
                    I'm a digital strategist passionate about solving complex problems through technology. With experience spanning customer support, AI automation, and workflow optimization, I specialize in building systems that scale and empower teams.
                </p>
                <p class="mb-4">
                    My approach combines technical expertise with deep understanding of user needs, gained through years of direct customer interaction. I believe the best solutions come from those who experience the problems daily.
                </p>
                <p class="mb-4">
                    When I'm not building automation systems or training AI models, you'll find me helping local businesses leverage technology to grow their operations and better serve their communities.
                </p>
            </div>
        </div>



        {/* Accordion Section 3 - Skills & Languages */}
        <div class="accordion-item border border-gray-200 dark:border-gray-700 rounded-lg mb-2">
            <button 
                class="accordion-header w-full text-left px-6 py-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 flex justify-between items-center font-semibold text-lg transition-colors duration-200" 
                data-section="section3"
            >
                <span>Skills & Languages</span>
                <svg class="accordion-icon w-5 h-5 transform transition-transform duration-200 rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="accordion-content px-6 py-4 hidden" data-section="section3">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold mb-4">Hard Skills</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {hardSkills.map((skill) => (
                                <SkillCard {...skill} showDescription={true}/>
                        ))}
                    </div>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-4">Soft Skills</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        {softSkills.map((skill) => (
                                <SkillCard {...skill} showDescription={false}/>
                        ))}
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-bold mb-4">Languages</h3>
                    <div class="flex flex-col gap-2">
                        {
                            languages.map((lang) => (
                                lang.show ? <p>{lang.name} - {lang.level}</p> : null
                            ))
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
        function initAccordion() {
            const headers = document.querySelectorAll('.accordion-header');
            
            // Set initial state - open section1 by default
            const defaultSection = document.querySelector('[data-section="section1"]');
            if (defaultSection) {
                const content = defaultSection.closest('.accordion-item').querySelector('.accordion-content');
                const icon = defaultSection.querySelector('.accordion-icon');
                if (content && icon) {
                    content.classList.remove('hidden');
                    content.classList.add('block');
                    icon.classList.remove('rotate-90');
                    icon.classList.add('rotate-180');
                }
            }
            
            headers.forEach(header => {
                header.addEventListener('click', function(e) {
                    e.preventDefault();
                    const content = this.closest('.accordion-item').querySelector('.accordion-content');
                    const icon = this.querySelector('.accordion-icon');
                    const isCurrentlyOpen = content && !content.classList.contains('hidden');
                    
                    // Close all other sections
                    document.querySelectorAll('.accordion-content').forEach(otherContent => {
                        if (otherContent !== content) {
                            otherContent.classList.remove('block');
                            otherContent.classList.add('hidden');
                        }
                    });
                    
                    // Reset all other icons
                    document.querySelectorAll('.accordion-icon').forEach(otherIcon => {
                        if (otherIcon !== icon) {
                            otherIcon.classList.remove('rotate-180');
                            otherIcon.classList.add('rotate-90');
                        }
                    });
                    
                    // Toggle current section
                    if (isCurrentlyOpen) {
                        // Close the currently open section
                        content.classList.remove('block');
                        content.classList.add('hidden');
                        icon.classList.remove('rotate-180');
                        icon.classList.add('rotate-90');
                    } else if (content && icon) {
                        // Open the clicked section
                        content.classList.remove('hidden');
                        content.classList.add('block');
                        icon.classList.remove('rotate-90');
                        icon.classList.add('rotate-180');
                    }
                });
            });
        }
        
        initAccordion();
    });
    
    // Re-initialize on navigation (for Astro transitions)
    document.addEventListener("astro:after-swap", function() {
        setTimeout(() => {
            const headers = document.querySelectorAll('.accordion-header');
            
            // Set initial state - open section1 by default
            const defaultSection = document.querySelector('[data-section="section1"]');
            if (defaultSection) {
                const content = defaultSection.closest('.accordion-item').querySelector('.accordion-content');
                const icon = defaultSection.querySelector('.accordion-icon');
                if (content && icon) {
                    content.classList.remove('hidden');
                    content.classList.add('block');
                    icon.classList.remove('rotate-90');
                    icon.classList.add('rotate-180');
                }
            }
            
            headers.forEach(header => {
                header.addEventListener('click', function(e) {
                    e.preventDefault();
                    const content = this.closest('.accordion-item').querySelector('.accordion-content');
                    const icon = this.querySelector('.accordion-icon');
                    const isCurrentlyOpen = content && !content.classList.contains('hidden');
                    
                    // Close all other sections
                    document.querySelectorAll('.accordion-content').forEach(otherContent => {
                        if (otherContent !== content) {
                            otherContent.classList.remove('block');
                            otherContent.classList.add('hidden');
                        }
                    });
                    
                    // Reset all other icons
                    document.querySelectorAll('.accordion-icon').forEach(otherIcon => {
                        if (otherIcon !== icon) {
                            otherIcon.classList.remove('rotate-180');
                            otherIcon.classList.add('rotate-90');
                        }
                    });
                    
                    // Toggle current section
                    if (isCurrentlyOpen) {
                        // Close the currently open section
                        content.classList.remove('block');
                        content.classList.add('hidden');
                        icon.classList.remove('rotate-180');
                        icon.classList.add('rotate-90');
                    } else if (content && icon) {
                        // Open the clicked section
                        content.classList.remove('hidden');
                        content.classList.add('block');
                        icon.classList.remove('rotate-90');
                        icon.classList.add('rotate-180');
                    }
                });
            });
        }, 100);
    });
</script>